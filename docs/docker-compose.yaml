name: zap-stream-core
services:
  db:
    image: mariadb
    restart: unless-stopped
    environment:
      - "MARIADB_ROOT_PASSWORD=my-super-strong-password"
    volumes:
      - "db:/var/lib/mysql/"
  redis:
    restart: unless-stopped
    image: redis
  core:
    image: voidic/zap-stream-core
    restart: unless-stopped
    depends_on:
      - db
      - redis
    environment:
      - "RUST_LOG=info"
    volumes:
      - "core:/app/data" # Path to store media
      - "./config.yaml:/app/config.yaml"
    ports:
      - "1935:1935"
      - "80:8080"
volumes:
  db:
  core: